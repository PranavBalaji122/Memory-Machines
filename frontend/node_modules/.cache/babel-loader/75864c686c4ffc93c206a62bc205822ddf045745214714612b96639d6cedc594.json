{"ast":null,"code":"var _s = $RefreshSig$();\n/**\n * useDeepgram Hook\n * Manages WebSocket connection to Deepgram API for real-time transcription\n * Handles audio streaming, transcript reception, and connection management\n */\n\nimport { useState, useEffect, useRef, useCallback } from 'react';\n\n/**\n * Custom hook for Deepgram WebSocket transcription\n * @param {Object} config - Configuration object\n * @param {Function} config.onTranscript - Callback when transcript is received\n * @param {string} config.apiKey - Deepgram API key\n * @returns {Object} Hook interface with connection methods and state\n */\nfunction useDeepgram({\n  onTranscript,\n  apiKey\n}) {\n  _s();\n  const [isConnected, setIsConnected] = useState(false);\n  const [error, setError] = useState(null);\n  const [transcript, setTranscript] = useState('');\n\n  // Refs for WebSocket and audio processing\n  const ws = useRef(null);\n  const mediaRecorder = useRef(null);\n  const audioContext = useRef(null);\n  const processor = useRef(null);\n  const reconnectTimeout = useRef(null);\n  const reconnectAttempts = useRef(0);\n\n  /**\n   * Connect to Deepgram WebSocket with audio stream\n   * @param {MediaStream} audioStream - Audio stream from getUserMedia\n   */\n  const connect = useCallback(async audioStream => {\n    try {\n      setError(null);\n\n      // Validate API key\n      if (!apiKey) {\n        throw new Error('Deepgram API key is required');\n      }\n\n      // Create WebSocket connection to Deepgram\n      const wsUrl = `wss://api.deepgram.com/v1/listen?` + new URLSearchParams({\n        encoding: 'linear16',\n        sample_rate: '16000',\n        channels: '1',\n        interim_results: 'true',\n        punctuate: 'true',\n        language: 'en-US',\n        model: 'nova-2'\n      });\n      ws.current = new WebSocket(wsUrl, ['token', apiKey]);\n\n      // Set up WebSocket event handlers\n      ws.current.onopen = () => {\n        console.log('Deepgram WebSocket connected');\n        setIsConnected(true);\n        setError(null);\n        reconnectAttempts.current = 0;\n\n        // Start streaming audio\n        startAudioStreaming(audioStream);\n      };\n      ws.current.onmessage = event => {\n        try {\n          const data = JSON.parse(event.data);\n\n          // Extract transcript from Deepgram response\n          if (data.channel && data.channel.alternatives && data.channel.alternatives[0]) {\n            const transcriptText = data.channel.alternatives[0].transcript;\n            if (transcriptText) {\n              setTranscript(transcriptText);\n\n              // Call the callback with formatted data\n              onTranscript({\n                text: transcriptText,\n                is_final: data.is_final || false,\n                speech_final: data.speech_final || false,\n                confidence: data.channel.alternatives[0].confidence || 0\n              });\n            }\n          }\n        } catch (err) {\n          console.error('Error parsing Deepgram message:', err);\n        }\n      };\n      ws.current.onerror = event => {\n        console.error('Deepgram WebSocket error:', event);\n        setError('Connection error occurred');\n      };\n      ws.current.onclose = event => {\n        console.log('Deepgram WebSocket closed:', event.code, event.reason);\n        setIsConnected(false);\n        stopAudioStreaming();\n\n        // Handle reconnection for unexpected disconnects\n        if (event.code !== 1000 && reconnectAttempts.current < 3) {\n          handleReconnect(audioStream);\n        }\n      };\n    } catch (err) {\n      console.error('Failed to connect to Deepgram:', err);\n      setError(err.message || 'Failed to connect');\n      setIsConnected(false);\n    }\n  }, [apiKey, onTranscript]);\n\n  /**\n   * Start streaming audio to WebSocket\n   * @param {MediaStream} audioStream - Audio stream to process\n   */\n  const startAudioStreaming = audioStream => {\n    try {\n      // Create audio context for processing\n      audioContext.current = new (window.AudioContext || window.webkitAudioContext)({\n        sampleRate: 16000\n      });\n      const source = audioContext.current.createMediaStreamSource(audioStream);\n      processor.current = audioContext.current.createScriptProcessor(4096, 1, 1);\n\n      // Process audio chunks and send to WebSocket\n      processor.current.onaudioprocess = e => {\n        if (ws.current && ws.current.readyState === WebSocket.OPEN) {\n          const inputData = e.inputBuffer.getChannelData(0);\n\n          // Convert float32 to int16 for Deepgram\n          const output = new Int16Array(inputData.length);\n          for (let i = 0; i < inputData.length; i++) {\n            const s = Math.max(-1, Math.min(1, inputData[i]));\n            output[i] = s < 0 ? s * 0x8000 : s * 0x7FFF;\n          }\n\n          // Send audio data to Deepgram\n          ws.current.send(output.buffer);\n        }\n      };\n\n      // Connect audio nodes\n      source.connect(processor.current);\n      processor.current.connect(audioContext.current.destination);\n    } catch (err) {\n      console.error('Error starting audio streaming:', err);\n      setError('Failed to process audio');\n    }\n  };\n\n  /**\n   * Stop audio streaming and clean up resources\n   */\n  const stopAudioStreaming = () => {\n    // Disconnect audio nodes\n    if (processor.current) {\n      processor.current.disconnect();\n      processor.current = null;\n    }\n\n    // Close audio context\n    if (audioContext.current) {\n      audioContext.current.close();\n      audioContext.current = null;\n    }\n\n    // Stop media recorder if exists\n    if (mediaRecorder.current && mediaRecorder.current.state !== 'inactive') {\n      mediaRecorder.current.stop();\n      mediaRecorder.current = null;\n    }\n  };\n\n  /**\n   * Handle reconnection with exponential backoff\n   * @param {MediaStream} audioStream - Audio stream to reconnect with\n   */\n  const handleReconnect = audioStream => {\n    reconnectAttempts.current++;\n    const delay = Math.min(1000 * Math.pow(2, reconnectAttempts.current), 10000);\n    console.log(`Attempting to reconnect in ${delay}ms...`);\n    setError(`Connection lost. Reconnecting...`);\n    reconnectTimeout.current = setTimeout(() => {\n      connect(audioStream);\n    }, delay);\n  };\n\n  /**\n   * Disconnect from Deepgram WebSocket\n   */\n  const disconnect = useCallback(() => {\n    // Clear any reconnection attempts\n    if (reconnectTimeout.current) {\n      clearTimeout(reconnectTimeout.current);\n      reconnectTimeout.current = null;\n    }\n\n    // Stop audio streaming\n    stopAudioStreaming();\n\n    // Close WebSocket connection\n    if (ws.current) {\n      ws.current.close(1000, 'User disconnected');\n      ws.current = null;\n    }\n    setIsConnected(false);\n    setTranscript('');\n    setError(null);\n    reconnectAttempts.current = 0;\n  }, []);\n\n  /**\n   * Cleanup on unmount\n   */\n  useEffect(() => {\n    return () => {\n      disconnect();\n    };\n  }, [disconnect]);\n  return {\n    transcript,\n    isConnected,\n    error,\n    connect,\n    disconnect\n  };\n}\n_s(useDeepgram, \"Z0gWG3QetytWSlp/mVBkbCa8lWg=\");\nexport default useDeepgram;","map":{"version":3,"names":["useState","useEffect","useRef","useCallback","useDeepgram","onTranscript","apiKey","_s","isConnected","setIsConnected","error","setError","transcript","setTranscript","ws","mediaRecorder","audioContext","processor","reconnectTimeout","reconnectAttempts","connect","audioStream","Error","wsUrl","URLSearchParams","encoding","sample_rate","channels","interim_results","punctuate","language","model","current","WebSocket","onopen","console","log","startAudioStreaming","onmessage","event","data","JSON","parse","channel","alternatives","transcriptText","text","is_final","speech_final","confidence","err","onerror","onclose","code","reason","stopAudioStreaming","handleReconnect","message","window","AudioContext","webkitAudioContext","sampleRate","source","createMediaStreamSource","createScriptProcessor","onaudioprocess","e","readyState","OPEN","inputData","inputBuffer","getChannelData","output","Int16Array","length","i","s","Math","max","min","send","buffer","destination","disconnect","close","state","stop","delay","pow","setTimeout","clearTimeout"],"sources":["/Users/pranavbalaji/Documents/Personal CS Projects/Memory Machines/sentiment-aura/frontend/src/hooks/useDeepgram.js"],"sourcesContent":["/**\n * useDeepgram Hook\n * Manages WebSocket connection to Deepgram API for real-time transcription\n * Handles audio streaming, transcript reception, and connection management\n */\n\nimport { useState, useEffect, useRef, useCallback } from 'react';\n\n/**\n * Custom hook for Deepgram WebSocket transcription\n * @param {Object} config - Configuration object\n * @param {Function} config.onTranscript - Callback when transcript is received\n * @param {string} config.apiKey - Deepgram API key\n * @returns {Object} Hook interface with connection methods and state\n */\nfunction useDeepgram({ onTranscript, apiKey }) {\n  const [isConnected, setIsConnected] = useState(false);\n  const [error, setError] = useState(null);\n  const [transcript, setTranscript] = useState('');\n  \n  // Refs for WebSocket and audio processing\n  const ws = useRef(null);\n  const mediaRecorder = useRef(null);\n  const audioContext = useRef(null);\n  const processor = useRef(null);\n  const reconnectTimeout = useRef(null);\n  const reconnectAttempts = useRef(0);\n  \n  /**\n   * Connect to Deepgram WebSocket with audio stream\n   * @param {MediaStream} audioStream - Audio stream from getUserMedia\n   */\n  const connect = useCallback(async (audioStream) => {\n    try {\n      setError(null);\n      \n      // Validate API key\n      if (!apiKey) {\n        throw new Error('Deepgram API key is required');\n      }\n      \n      // Create WebSocket connection to Deepgram\n      const wsUrl = `wss://api.deepgram.com/v1/listen?` + new URLSearchParams({\n        encoding: 'linear16',\n        sample_rate: '16000',\n        channels: '1',\n        interim_results: 'true',\n        punctuate: 'true',\n        language: 'en-US',\n        model: 'nova-2'\n      });\n      \n      ws.current = new WebSocket(wsUrl, ['token', apiKey]);\n      \n      // Set up WebSocket event handlers\n      ws.current.onopen = () => {\n        console.log('Deepgram WebSocket connected');\n        setIsConnected(true);\n        setError(null);\n        reconnectAttempts.current = 0;\n        \n        // Start streaming audio\n        startAudioStreaming(audioStream);\n      };\n      \n      ws.current.onmessage = (event) => {\n        try {\n          const data = JSON.parse(event.data);\n          \n          // Extract transcript from Deepgram response\n          if (data.channel && data.channel.alternatives && data.channel.alternatives[0]) {\n            const transcriptText = data.channel.alternatives[0].transcript;\n            \n            if (transcriptText) {\n              setTranscript(transcriptText);\n              \n              // Call the callback with formatted data\n              onTranscript({\n                text: transcriptText,\n                is_final: data.is_final || false,\n                speech_final: data.speech_final || false,\n                confidence: data.channel.alternatives[0].confidence || 0\n              });\n            }\n          }\n        } catch (err) {\n          console.error('Error parsing Deepgram message:', err);\n        }\n      };\n      \n      ws.current.onerror = (event) => {\n        console.error('Deepgram WebSocket error:', event);\n        setError('Connection error occurred');\n      };\n      \n      ws.current.onclose = (event) => {\n        console.log('Deepgram WebSocket closed:', event.code, event.reason);\n        setIsConnected(false);\n        stopAudioStreaming();\n        \n        // Handle reconnection for unexpected disconnects\n        if (event.code !== 1000 && reconnectAttempts.current < 3) {\n          handleReconnect(audioStream);\n        }\n      };\n      \n    } catch (err) {\n      console.error('Failed to connect to Deepgram:', err);\n      setError(err.message || 'Failed to connect');\n      setIsConnected(false);\n    }\n  }, [apiKey, onTranscript]);\n  \n  /**\n   * Start streaming audio to WebSocket\n   * @param {MediaStream} audioStream - Audio stream to process\n   */\n  const startAudioStreaming = (audioStream) => {\n    try {\n      // Create audio context for processing\n      audioContext.current = new (window.AudioContext || window.webkitAudioContext)({\n        sampleRate: 16000\n      });\n      \n      const source = audioContext.current.createMediaStreamSource(audioStream);\n      processor.current = audioContext.current.createScriptProcessor(4096, 1, 1);\n      \n      // Process audio chunks and send to WebSocket\n      processor.current.onaudioprocess = (e) => {\n        if (ws.current && ws.current.readyState === WebSocket.OPEN) {\n          const inputData = e.inputBuffer.getChannelData(0);\n          \n          // Convert float32 to int16 for Deepgram\n          const output = new Int16Array(inputData.length);\n          for (let i = 0; i < inputData.length; i++) {\n            const s = Math.max(-1, Math.min(1, inputData[i]));\n            output[i] = s < 0 ? s * 0x8000 : s * 0x7FFF;\n          }\n          \n          // Send audio data to Deepgram\n          ws.current.send(output.buffer);\n        }\n      };\n      \n      // Connect audio nodes\n      source.connect(processor.current);\n      processor.current.connect(audioContext.current.destination);\n      \n    } catch (err) {\n      console.error('Error starting audio streaming:', err);\n      setError('Failed to process audio');\n    }\n  };\n  \n  /**\n   * Stop audio streaming and clean up resources\n   */\n  const stopAudioStreaming = () => {\n    // Disconnect audio nodes\n    if (processor.current) {\n      processor.current.disconnect();\n      processor.current = null;\n    }\n    \n    // Close audio context\n    if (audioContext.current) {\n      audioContext.current.close();\n      audioContext.current = null;\n    }\n    \n    // Stop media recorder if exists\n    if (mediaRecorder.current && mediaRecorder.current.state !== 'inactive') {\n      mediaRecorder.current.stop();\n      mediaRecorder.current = null;\n    }\n  };\n  \n  /**\n   * Handle reconnection with exponential backoff\n   * @param {MediaStream} audioStream - Audio stream to reconnect with\n   */\n  const handleReconnect = (audioStream) => {\n    reconnectAttempts.current++;\n    const delay = Math.min(1000 * Math.pow(2, reconnectAttempts.current), 10000);\n    \n    console.log(`Attempting to reconnect in ${delay}ms...`);\n    setError(`Connection lost. Reconnecting...`);\n    \n    reconnectTimeout.current = setTimeout(() => {\n      connect(audioStream);\n    }, delay);\n  };\n  \n  /**\n   * Disconnect from Deepgram WebSocket\n   */\n  const disconnect = useCallback(() => {\n    // Clear any reconnection attempts\n    if (reconnectTimeout.current) {\n      clearTimeout(reconnectTimeout.current);\n      reconnectTimeout.current = null;\n    }\n    \n    // Stop audio streaming\n    stopAudioStreaming();\n    \n    // Close WebSocket connection\n    if (ws.current) {\n      ws.current.close(1000, 'User disconnected');\n      ws.current = null;\n    }\n    \n    setIsConnected(false);\n    setTranscript('');\n    setError(null);\n    reconnectAttempts.current = 0;\n  }, []);\n  \n  /**\n   * Cleanup on unmount\n   */\n  useEffect(() => {\n    return () => {\n      disconnect();\n    };\n  }, [disconnect]);\n  \n  return {\n    transcript,\n    isConnected,\n    error,\n    connect,\n    disconnect\n  };\n}\n\nexport default useDeepgram;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}